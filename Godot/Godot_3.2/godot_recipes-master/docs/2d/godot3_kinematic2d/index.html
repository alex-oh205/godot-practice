<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="Gamedev lessons for Godot Engine.">
    <meta name="keywords" content="gamedev, programming, game development, coding, gdscript, game design">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.54.0" />
    <meta name="description" content="">


    <link rel="icon" href="/godot_recipes/images/favicon.png" type="image/png">

    <title>Using KinematicBody2D :: Godot Recipes by KidsCanCode</title>

    
    <link href="/godot_recipes/css/nucleus.css?1555964166" rel="stylesheet">
    <link href="/godot_recipes/css/fontawesome-all.min.css?1555964166" rel="stylesheet">
    <link href="/godot_recipes/css/hybrid.css?1555964166" rel="stylesheet">
    <link href="/godot_recipes/css/featherlight.min.css?1555964166" rel="stylesheet">
    <link href="/godot_recipes/css/perfect-scrollbar.min.css?1555964166" rel="stylesheet">
    <link href="/godot_recipes/css/auto-complete.css?1555964166" rel="stylesheet">
    <link href="/godot_recipes/css/atom-one-dark-reasonable.css?1555964166" rel="stylesheet">
    <link href="/godot_recipes/css/theme.css?1555964166" rel="stylesheet">
    <link href="/godot_recipes/css/hugo-theme.css?1555964166" rel="stylesheet">
    
      <link href="/godot_recipes/css/theme-green.css?1555964166" rel="stylesheet">
    

    <script src="/godot_recipes/js/jquery-3.3.1.min.js?1555964166"></script>

    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
<style type="text/css">
    pre code {
        white-space: pre;
    }
</style>

  </head>
  <body class="" data-url="/godot_recipes/2d/godot3_kinematic2d/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      

<img src="/godot_recipes/images/kcc_logo_square.png" />


    </div>
      <a href="https://www.patreon.com/kidscancode"><img src="/godot_lessons/img/become_a_patron_button.png"/></a>
        

    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/godot_recipes/js/lunr.min.js?1555964166"></script>
<script type="text/javascript" src="/godot_recipes/js/auto-complete.js?1555964166"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/kidscancode.org\/godot_recipes\/";
    
</script>
<script type="text/javascript" src="/godot_recipes/js/search.js?1555964166"></script>

    

  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/godot_recipes/basics/" title="Godot 101" class="dd-item
        
        
        
        ">
      <a href="/godot_recipes/basics/">
          <i class='fas fa-graduation-cap'></i> Godot 101
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            


 
  
    
    <li data-nav-id="/godot_recipes/basics/start/" title="Getting Started" class="dd-item
        
        
        
        ">
      <a href="/godot_recipes/basics/start/">
          <i class='fas fa-feather-alt'></i> Getting Started
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/basics/start/101_01/" title="What is Godot?" class="dd-item ">
        <a href="/godot_recipes/basics/start/101_01/">
        01. What is Godot?
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/basics/start/101_02/" title="Godot&#39;s Editor: Finding your way around" class="dd-item ">
        <a href="/godot_recipes/basics/start/101_02/">
        02. The Godot Editor
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/basics/start/101_03/" title="Nodes: Godot&#39;s building blocks" class="dd-item ">
        <a href="/godot_recipes/basics/start/101_03/">
        03. Nodes
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/godot_recipes/basics/gdscript/" title="GDScript" class="dd-item
        
        
        
        ">
      <a href="/godot_recipes/basics/gdscript/">
          <i class='fas fa-scroll'></i> GDScript
          
      </a>
      
      
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/godot_recipes/basics/3d/" title="Intro to 3D" class="dd-item
        
        
        
        ">
      <a href="/godot_recipes/basics/3d/">
          <i class='fas fa-cube'></i> Intro to 3D
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/basics/3d/101_3d_01/" title="The 3D Editor" class="dd-item ">
        <a href="/godot_recipes/basics/3d/101_3d_01/">
        01. The 3D Editor
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/basics/3d/101_3d_02/" title="Importing 3D Objects" class="dd-item ">
        <a href="/godot_recipes/basics/3d/101_3d_02/">
        02. Importing 3D Objects
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/basics/3d/101_3d_03/" title="Creating a 3D Character" class="dd-item ">
        <a href="/godot_recipes/basics/3d/101_3d_03/">
        03. Creating a 3D Character
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/basics/3d/101_3d_04/" title="Using Areas" class="dd-item ">
        <a href="/godot_recipes/basics/3d/101_3d_04/">
        04. Using Areas
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/basics/3d/101_3d_05/" title="Edge Detection &amp; Mouse Capture" class="dd-item ">
        <a href="/godot_recipes/basics/3d/101_3d_05/">
        05. Edge Detection &amp; Mouse Capture
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/basics/3d/101_3d_06/" title="Using CSG" class="dd-item ">
        <a href="/godot_recipes/basics/3d/101_3d_06/">
        06. Using CSG
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/basics/3d/101_3d_07/" title="First-person Character" class="dd-item ">
        <a href="/godot_recipes/basics/3d/101_3d_07/">
        07. First-person Character
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/godot_recipes/2d/" title="2D" class="dd-item
        parent
        
        
        ">
      <a href="/godot_recipes/2d/">
          <i class='fas fa-shapes'></i> 2D
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/2d/splitscreen_demo/" title="Splitscreen Demo (Using Viewports)" class="dd-item ">
        <a href="/godot_recipes/2d/splitscreen_demo/">
        Splitscreen Demo (Using Viewports)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/2d/godot3_kinematic2d/" title="Using KinematicBody2D" class="dd-item active">
        <a href="/godot_recipes/2d/godot3_kinematic2d/">
        Using KinematicBody2D
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/godot_recipes/3d/" title="3D" class="dd-item
        
        
        
        ">
      <a href="/godot_recipes/3d/">
          <i class='fas fa-cube'></i> 3D
          
      </a>
      
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/godot_recipes/input/" title="Input" class="dd-item
        
        
        
        ">
      <a href="/godot_recipes/input/">
          <i class='fas fa-gamepad'></i> Input
          
      </a>
      
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/godot_recipes/physics/" title="Physics" class="dd-item
        
        
        
        ">
      <a href="/godot_recipes/physics/">
          <i class='fas fa-atom'></i> Physics
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/physics/godot3_kyn_rigidbody1/" title="Using Rigid Bodies" class="dd-item ">
        <a href="/godot_recipes/physics/godot3_kyn_rigidbody1/">
        Using Rigid Bodies
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/godot_recipes/ui/" title="UI" class="dd-item
        
        
        
        ">
      <a href="/godot_recipes/ui/">
          <i class='far fa-window-maximize'></i> UI
          
      </a>
      
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/godot_recipes/math/" title="Gamedev Math" class="dd-item
        
        
        
        ">
      <a href="/godot_recipes/math/">
          <i class='fas fa-rocket'></i> Gamedev Math
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/math/transforms/" title="Transforms" class="dd-item ">
        <a href="/godot_recipes/math/transforms/">
        Transforms
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/godot_recipes/recipes/" title="Misc" class="dd-item
        
        
        
        ">
      <a href="/godot_recipes/recipes/">
          <i class='fas fa-box-open'></i> Misc
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/recipes/godot3_inheritance/" title="Inheritance" class="dd-item ">
        <a href="/godot_recipes/recipes/godot3_inheritance/">
        Inheritance
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/godot_recipes/shaders/" title="Shaders" class="dd-item
        
        
        
        ">
      <a href="/godot_recipes/shaders/">
          <i class='fas fa-draw-polygon'></i> Shaders
          
      </a>
      
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/godot_recipes/games/" title="Game Tutorials" class="dd-item
        
        
        
        ">
      <a href="/godot_recipes/games/">
          <i class='fas fa-chess-pawn'></i> Game Tutorials
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            


 
  
    
    <li data-nav-id="/godot_recipes/games/circle_jump/" title="Mobile Game: Circle Jump" class="dd-item
        
        
        
        ">
      <a href="/godot_recipes/games/circle_jump/">
          <i class='far fa-circle'></i> Mobile Game: Circle Jump
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/games/circle_jump/circle_jump_01/" title="Project setup" class="dd-item ">
        <a href="/godot_recipes/games/circle_jump/circle_jump_01/">
        01. Project setup
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/godot_recipes/games/circle_jump/circle_jump_02/" title="Spawning Circles" class="dd-item ">
        <a href="/godot_recipes/games/circle_jump/circle_jump_02/">
        02. Spawning Circles
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      
<p align="center">
    <a href="https://github.com/kidscancode/godot_lessons"><i class="fab fa-github-square fa-3x"></i></a>
    <a href="https://www.youtube.com/c/KidsCanCodeOrg"><i class="fab fa-youtube-square fa-3x"></i></a>
    <a href="http://twitter.com/KidsCanCode"><i class="fab fa-twitter-square fa-3x"></i></a>
</p>
<p align="center"><i class="far fa-copyright"></i> 2019 KidsCanCode </p>
    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/godot_recipes/'>Home</a> > <a href='/godot_recipes/2d/'>2D</a> > Using KinematicBody2D
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#introduction-physics-bodies">Introduction: Physics bodies</a></li>
<li><a href="#collision-shapes">Collision shapes</a>
<ul>
<li><a href="#collision-layers-and-masks">Collision Layers and Masks</a></li>
</ul></li>
<li><a href="#kinematic-bodies">Kinematic Bodies</a>
<ul>
<li><a href="#movement-and-collision">Movement and collision</a>
<ul>
<li><a href="#move-and-collide">move_and_collide</a>
<ul>
<li><a href="#kinematiccollision2d">KinematicCollision2D</a></li>
</ul></li>
<li><a href="#move-and-slide">move_and_slide</a></li>
</ul></li>
<li><a href="#which-to-use">Which to use?</a></li>
</ul></li>
<li><a href="#examples">Examples</a></li>
<li><a href="#basic-movement">Basic movement</a>
<ul>
<li><a href="#bouncing-reflecting-and-collision-detection">Bouncing/reflecting and collision detection</a></li>
<li><a href="#platforming-with-move-and-slide">Platforming with move_and_slide</a></li>
</ul></li>
<li><a href="#conclusion">Conclusion</a>
<ul>
<li><a href="#a-href-blog-img-kyn3-0-kinematicbody2d-zip-download-the-sample-project-a"><a href="/blog/img/KYN3.0_KinematicBody2D.zip">Download the sample project</a></a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Using KinematicBody2D
            </h1>
          

        





<p>Godot offers a number of collision objects to provide both collision detection and response. Trying to decide which one to use for your project can be confusing. You can avoid problems and simplify development if you understand how each each works and what their pros and cons are. In this tutorial, we&rsquo;ll look at the <code>KinematicBody2D</code> node and show some examples of how it can be used.</p>

<h2 id="introduction-physics-bodies">Introduction: Physics bodies</h2>

<p>In game development you often need to know when two objects in the game space intersect or come into contact. This is known as <em>collision detection</em>. When a collision is detected, you typically want something to happen. This is known as <em>collision response</em>.</p>

<p>Godot offers three kinds of physics bodies, grouped under the <a href="http://docs.godotengine.org/en/latest/classes/class_physicsbody2d.html" target="_blank"><code>PhysicsBody2D</code></a> type:</p>

<ul>
<li><code>StaticBody2D</code></li>
</ul>

<p>A static body is one that is not moved by the physics engine. It participates in collision detection, but does not move in response to the collision. This type of body is most often used for objects that are part of the environment or that do not need to have any dynamic behavior.</p>

<ul>
<li><code>RigidBody2D</code></li>
</ul>

<p>This is the node that implements simulated 2D physics. You do not control a <code>RigidBody2D</code> directly, but instead you apply forces to it (gravity, impulses, etc.) and the physics engine calculates the resulting movement. See <a href="/blog/2017/12/godot3_kyn_rigidbody1/">Godot 3.0: Rigid Bodies</a> for more information.</p>

<ul>
<li><code>KinematicBody2D</code></li>
</ul>

<p>A body that provides collision detection, but no physics. All movement must be implemented in code.</p>

<h2 id="collision-shapes">Collision shapes</h2>

<p>A physics body can hold any number of <code>Shape2D</code> objects as children. These shapes are used to define the object&rsquo;s collision bounds and to detect contact with other objects.</p>

<blockquote>
<p><strong>Note:</strong> In order to detect collisions, at least one <code>Shape2D</code> must be assigned to the object.</p>
</blockquote>

<p>The most common way to assign a shape is by adding a <code>CollisionShape2D</code> or <code>CollisionPolygon2D</code> as a child of the object. These nodes allow you to draw the shape directly in the editor workspace.</p>

<blockquote>
<p><strong>Note:</strong> Be careful to never scale your collision shapes in the editor. The <code>Scale</code> property in the Inspector should remain at <code>(1, 1)</code>. When changing the size of the collision shape, you should always use the shape&rsquo;s handles, <em>not</em> the <code>Node2D</code> scale handles. Changing the scale can result in unexpected collision behavior.</p>
</blockquote>

<p>!player_coll_shape.png</p>

<h3 id="collision-layers-and-masks">Collision Layers and Masks</h3>

<p>One of the most powerful but frequently misunderstood collision features in Godot is the collision layer system. This system allows you to build up very complex interactions between a variety of objects. The key concepts are <em>layers</em> and <em>masks</em>. Each CollisionObject2D has 32 different physics layers it can interact with.</p>

<p>Let&rsquo;s look at each of the properties in turn:</p>

<ul>
<li><p><strong><code>collision_layer</code></strong>
describes the layers that the object appears <em>in</em>. By default, all bodies are on layer <code>1</code>.</p></li>

<li><p><strong><code>collision_mask</code></strong>
describes what layers the body will <em>scan</em> for collisions. If an object isn&rsquo;t in one of the mask layers, the body will ignore it. By default, all bodies scan layer <code>1</code>.</p></li>
</ul>

<p>You can also assign names to layers. In &ldquo;Project Settings&rdquo;, look for the &ldquo;Layer Names -&gt; 2D Physics&rdquo; section:</p>

<p><img src="/godot_lessons/img/k2d_layer_names.png?width=300" alt="alt" /></p>

<p>A body&rsquo;s layer properties can be configured via code, or directly in the Inspector:</p>

<p><img src="/godot_lessons/img/k2d_layer_example.png?width=300" alt="alt" /></p>

<p><strong>Example:</strong></p>

<p>You have three nodes with the following configuration:</p>

<table>
<thead>
<tr>
<th></th>
<th>Layers</th>
<th>Mask</th>
</tr>
</thead>

<tbody>
<tr>
<td><strong>Player</strong></td>
<td><code>1</code></td>
<td><code>2, 3</code></td>
</tr>

<tr>
<td><strong>Enemy</strong></td>
<td><code>2</code></td>
<td><code>1</code></td>
</tr>

<tr>
<td><strong>Coin</strong></td>
<td><code>3</code></td>
<td><code>1</code></td>
</tr>
</tbody>
</table>

<p>In this scenario, the <code>Player</code> node would detect collisions with both <code>Enemy</code> and <code>Coin</code> nodes (because they are in layers it scans). However, <code>Enemy</code> and <code>Coin</code> nodes would not detect each other, because they only scan layers they are <em>not</em> in.</p>

<h2 id="kinematic-bodies">Kinematic Bodies</h2>

<p><code>KinematicBody2D</code> is for implementing bodies that are to be controlled via code. They detect collisions with other bodies when moving, but are not affected by engine physics properties like gravity or friction. While this means that you have to write some code to create their behavior, it also means you have more precise control over how they move and react.</p>

<blockquote>
<p><strong>Note:</strong> A <code>KinematicBody2D</code> can be affected by gravity and other forces, but you must calculate the movement in code. The physics engine will not move a <code>KinematicBody2D</code>.</p>
</blockquote>

<h3 id="movement-and-collision">Movement and collision</h3>

<p>When moving a <code>KinematicBody2D</code>, you should not set its <code>position</code> directly. Instead, you use the <code>move_and_collide()</code> or <code>move_and_slide()</code> methods. These methods move the body along a given vector and will instantly stop if a collision is detected with another body. After a KinematicBody2D has collided, any <em>collision response</em> must be coded manually.</p>

<blockquote>
<p><strong>Note:</strong> Kinematic body movement should only be done in the <code>_physics_process()</code> callback.</p>
</blockquote>

<h4 id="move-and-collide">move_and_collide</h4>

<p>This method takes one parameter: a <code>Vector2</code> indicating the body&rsquo;s relative movement. Typically, this is your velocity vector multiplied by the frame timestep (<code>delta</code>). If the engine detects a collision anywhere along this vector, the body will immediately stop moving. If this happens, the method will return a <code>KinematicCollision2D</code> object.</p>

<h5 id="kinematiccollision2d">KinematicCollision2D</h5>

<p>When a KinematicBody2D detects a collision, Godot provides a <a href="http://docs.godotengine.org/en/latest/classes/class_kinematiccollision2d.html" target="_blank"><code>KinematicCollision2D</code></a> object. This object contains data about the collision and the colliding object. Using this data you can calculate your collision response.</p>

<h4 id="move-and-slide">move_and_slide</h4>

<p>The <code>move_and_slide()</code> method is intended to simplify the collision response in the common case where you want one body to slide along the other. This is especially useful in platformers or top-down games, for example.</p>

<blockquote>
<p><strong>NOTE:</strong> <code>move_and_slide()</code> automatically calculates frame-based movement using <code>delta</code>. Do <em>not</em> multiply your velocity vector by <code>delta</code> before passing it to <code>move_and_slide()</code>.</p>
</blockquote>

<p>In addition to the velocity vector, <code>move_and_slide</code> takes a number of other parameters allowing you to customize the slide behavior:</p>

<p><code>floor_normal</code> - default value: <code>Vector2( 0, 0 )</code></p>

<p>This parameter allows you to define what surfaces the engine should consider to be the floor. Setting this lets you use the <code>is_on_floor()</code>, <code>is_on_wall()</code>, and <code>is_on_ceiling()</code> methods to detect what type of surface the body is in contact with. The default value means that all surfaces are considered walls.</p>

<p><code>slope_stop_min_velocity</code> - default value: <code>5</code></p>

<p>This is the minimum velocity when standing on a slope. This prevents a body from sliding down a slope when standing still.</p>

<p><code>max_bounces</code> - default value: <code>4</code></p>

<p>This is the maximum number of collisions before the body stops moving. Setting this too low may prevent movement entirely.</p>

<p><code>floor_max_angle</code> - default value: <code>0.785398</code> (in radians, equivalent to 45 degrees)</p>

<p>This is the maximum angle before a surface is no longer considered a &ldquo;floor&rdquo;.</p>

<h3 id="which-to-use">Which to use?</h3>

<p>A common question from new Godot users is: &ldquo;How do you decide which movement function to use?&rdquo;
Often the response is to use <code>move_and_slide()</code> because it&rsquo;s &ldquo;simpler&rdquo;, but this is not
necessarily the case. One way to think of it is that <code>move_and_slide()</code> is a special case,
and <code>move_and_collide()</code> is more general. For example, the following two code snippets result in the same collision response:</p>

<p><img src="/godot_lessons/img/k2d_compare.gif" alt="alt" /></p>

<p><div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">var collision <span style="color:#ff79c6">=</span> move_and_collide(velocity <span style="color:#ff79c6">*</span> delta)
<span style="color:#ff79c6">if</span> collision:
	velocity <span style="color:#ff79c6">=</span> velocity<span style="color:#ff79c6">.</span>slide(collision<span style="color:#ff79c6">.</span>normal)</code></pre></div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">velocity <span style="color:#ff79c6">=</span> move_and_slide(velocity)</code></pre></div></p>

<p>Anything you do with <code>move_and_slide()</code> can also be done with <code>move_and_collide()</code>,
it just might take a little more code. However, as we&rsquo;ll see in the examples below,
there are cases where <code>move_and_slide()</code> isn&rsquo;t the response you want.</p>

<h2 id="examples">Examples</h2>

<p>Download the <a href="/blog/img/KYN3.0_KinematicBody2D.zip">Sample Project</a> for the examples
below.</p>

<h2 id="basic-movement">Basic movement</h2>

<p>If you&rsquo;ve downloaded the sample project, this example is in the &ldquo;BasicMovement.tscn&rdquo; scene.</p>

<p>For this example, Add a <code>KinematicBody2D</code> with two children: a <code>Sprite</code> and a <code>CollisionShape2D</code>. As with many demos, we&rsquo;ll use the Godot &ldquo;icon.png&rdquo; as the Sprite&rsquo;s texture (drag it from the Filesystem dock to the &ldquo;Texture&rdquo; property of the <code>Sprite</code>). In the <code>CollisionShape2D</code>&rsquo;s &ldquo;Shape&rdquo; property, select &ldquo;New RectangleShape2D&rdquo; and size the rectangle to fit over the sprite image.</p>

<p>Attach a script to the KinematicBody2D and add the following code:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">extends KinematicBody2D

var speed <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">250</span>
var velocity <span style="color:#ff79c6">=</span> Vector2()

func get_input():
	<span style="color:#6272a4"># Detect up/down/left/right keystate and only move when pressed</span>
	velocity <span style="color:#ff79c6">=</span> Vector2()
	<span style="color:#ff79c6">if</span> Input<span style="color:#ff79c6">.</span>is_action_pressed(<span style="color:#f1fa8c">&#39;ui_right&#39;</span>):
		velocity<span style="color:#ff79c6">.</span>x <span style="color:#ff79c6">+=</span> <span style="color:#bd93f9">1</span>
	<span style="color:#ff79c6">if</span> Input<span style="color:#ff79c6">.</span>is_action_pressed(<span style="color:#f1fa8c">&#39;ui_left&#39;</span>):
		velocity<span style="color:#ff79c6">.</span>x <span style="color:#ff79c6">-=</span> <span style="color:#bd93f9">1</span>
	<span style="color:#ff79c6">if</span> Input<span style="color:#ff79c6">.</span>is_action_pressed(<span style="color:#f1fa8c">&#39;ui_down&#39;</span>):
		velocity<span style="color:#ff79c6">.</span>y <span style="color:#ff79c6">+=</span> <span style="color:#bd93f9">1</span>
	<span style="color:#ff79c6">if</span> Input<span style="color:#ff79c6">.</span>is_action_pressed(<span style="color:#f1fa8c">&#39;ui_up&#39;</span>):
		velocity<span style="color:#ff79c6">.</span>y <span style="color:#ff79c6">-=</span> <span style="color:#bd93f9">1</span>
	velocity <span style="color:#ff79c6">=</span> velocity<span style="color:#ff79c6">.</span>normalized() <span style="color:#ff79c6">*</span> speed

func _physics_process(delta):
	get_input()
	move_and_collide(velocity <span style="color:#ff79c6">*</span> delta)</code></pre></div>

<p>Run this scene and you&rsquo;ll see that <code>move_and_collide()</code> works as expected, moving
the body along the velocity vector. Now let&rsquo;s see what happens when you add
some obstacles. Add a StaticBody2D with a rectangular collision shape. For visibility,
you can use a sprite, a Polygon2D, or just turn on &ldquo;Visible Collision Shapes&rdquo; from
the &ldquo;Debug&rdquo; menu.</p>

<p>Run the scene again and try moving into the obstacle. You&rsquo;ll see that the <code>KinematicBody2D</code>
can&rsquo;t penetrate the obstacle. However, try moving into the obstacle at an angle and
you&rsquo;ll find that the obstacle acts like glue - it feels like the body gets stuck.</p>

<p>This happens because there is no <em>collision response</em>. <code>move_and_collide()</code> just stops
the body&rsquo;s movement when a collision occurs. We need to code whatever response we
want from the collision.</p>

<p>Try changing the function to <code>move_and_slide(velocity)</code> and running again. Note that we removed <code>delta</code> from the velocity calculation.</p>

<p><code>move_and_slide()</code> provides a default collision response of sliding the body along the
collision object. This is useful for a great many game types, and may be all you need
to get the behavior you want.</p>

<p>Next, we&rsquo;ll look at a few other examples.</p>

<h3 id="bouncing-reflecting-and-collision-detection">Bouncing/reflecting and collision detection</h3>

<p>What if you don&rsquo;t want a sliding collision response? For this example (&ldquo;BounceandCollide.tscn&rdquo;
in the sample project), we have a character shooting bullets and we want the bullets to
bounce off the walls.</p>

<p>For this example, we have three scenes: the main scene containing the Player, a Bullet,
and a Wall. The Bullet and Wall are separate scenes so that they can be instanced.</p>

<p>The Player is controlled by W/S for forward/back and aims using the mouse. Here is
the code for the Player, using <code>move_and_slide()</code>:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">extends KinematicBody2D

export (PackedScene) var Bullet
export (<span style="color:#8be9fd;font-style:italic">int</span>) var speed

var velocity <span style="color:#ff79c6">=</span> Vector2()

func get_input():
	<span style="color:#6272a4"># add these actions in Project Settings -&gt; Input Map</span>
	velocity <span style="color:#ff79c6">=</span> Vector2()
	<span style="color:#ff79c6">if</span> Input<span style="color:#ff79c6">.</span>is_action_pressed(<span style="color:#f1fa8c">&#39;backward&#39;</span>):
		velocity <span style="color:#ff79c6">=</span> Vector2(<span style="color:#ff79c6">-</span>speed<span style="color:#ff79c6">/</span><span style="color:#bd93f9">3</span>, <span style="color:#bd93f9">0</span>)<span style="color:#ff79c6">.</span>rotated(rotation)
	<span style="color:#ff79c6">if</span> Input<span style="color:#ff79c6">.</span>is_action_pressed(<span style="color:#f1fa8c">&#39;forward&#39;</span>):
		velocity <span style="color:#ff79c6">=</span> Vector2(speed, <span style="color:#bd93f9">0</span>)<span style="color:#ff79c6">.</span>rotated(rotation)
	<span style="color:#ff79c6">if</span> Input<span style="color:#ff79c6">.</span>is_action_just_pressed(<span style="color:#f1fa8c">&#39;mouse_click&#39;</span>):
		shoot()

func shoot():
	<span style="color:#6272a4"># &#34;Muzzle&#34; is a Position2D placed at the barrel of the gun</span>
	var b <span style="color:#ff79c6">=</span> Bullet<span style="color:#ff79c6">.</span>instance()
	b<span style="color:#ff79c6">.</span>start($Muzzle<span style="color:#ff79c6">.</span>global_position, rotation)
	get_parent()<span style="color:#ff79c6">.</span>add_child(b)

func _physics_process(delta):
	get_input()
	var <span style="color:#8be9fd;font-style:italic">dir</span> <span style="color:#ff79c6">=</span> get_global_mouse_position() <span style="color:#ff79c6">-</span> global_position
	<span style="color:#6272a4"># Don&#39;t move if too close to the mouse pointer</span>
	<span style="color:#ff79c6">if</span> <span style="color:#8be9fd;font-style:italic">dir</span><span style="color:#ff79c6">.</span>length() <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">5</span>:
		rotation <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">dir</span><span style="color:#ff79c6">.</span>angle()
		velocity <span style="color:#ff79c6">=</span> move_and_slide(velocity)</code></pre></div>

<p>And the code for the Bullet:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">extends KinematicBody2D

var speed <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">750</span>
var velocity <span style="color:#ff79c6">=</span> Vector2()

func start(pos, <span style="color:#8be9fd;font-style:italic">dir</span>):
	rotation <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">dir</span>
	position <span style="color:#ff79c6">=</span> pos
	velocity <span style="color:#ff79c6">=</span> Vector2(speed, <span style="color:#bd93f9">0</span>)<span style="color:#ff79c6">.</span>rotated(rotation)

func _physics_process(delta):
	var collision <span style="color:#ff79c6">=</span> move_and_collide(velocity <span style="color:#ff79c6">*</span> delta)
	<span style="color:#ff79c6">if</span> collision:
		velocity <span style="color:#ff79c6">=</span> velocity<span style="color:#ff79c6">.</span>bounce(collision<span style="color:#ff79c6">.</span>normal)
		<span style="color:#ff79c6">if</span> collision<span style="color:#ff79c6">.</span>collider<span style="color:#ff79c6">.</span>has_method(<span style="color:#f1fa8c">&#34;hit&#34;</span>):
			collision<span style="color:#ff79c6">.</span>collider<span style="color:#ff79c6">.</span>hit()

func _on_VisibilityNotifier2D_screen_exited():
	queue_free()</code></pre></div>

<p>The action happens in <code>_physics_process()</code>. After using <code>move_and_collide()</code> if a
collision occurs, a <code>KinematicCollision2D</code> object is returned (otherwise, the return
is <code>Nil</code>).</p>

<p>If there is a returned collision, we use the <code>normal</code> of the collision to reflect
the bullet&rsquo;s <code>velocity</code>. <code>bounce()</code> is a <code>Vector2</code> method.</p>

<p>If the colliding object (<code>collider</code>) has a <code>hit</code> method,
we also call it. In the example project, we&rsquo;ve added a flashing color effect to
the Wall to demonstrate this.</p>

<p><img src="/godot_lessons/img/k2d_bullet_bounce.gif" alt="alt" /></p>

<h3 id="platforming-with-move-and-slide">Platforming with move_and_slide</h3>

<p>Let&rsquo;s try one more example - one that often gets asked about - the 2D platformer. <code>move_and_slide()</code> is ideal for quickly getting a functional character controller up and running. If you&rsquo;ve downloaded the sample project, you can find this in &ldquo;Platformer.tscn&rdquo;.</p>

<p>For this example, we&rsquo;ll assume you have a level made of StaticBody2D objects. They can be any shape and size. In the sample project, we&rsquo;re using a TileMap to lay out the level, but for the purposes of this demo, they could just as well be individual static bodies.</p>

<p>We&rsquo;re also using the adorable <a href="https://opengameart.org/content/sunny-land-2d-pixel-art-pack">&ldquo;Sunny Land&rdquo; art pack by Ansimuz</a> for the art and character animations.</p>

<p>Here&rsquo;s the code for the player body:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">extends KinematicBody2D

export (<span style="color:#8be9fd;font-style:italic">int</span>) var run_speed
export (<span style="color:#8be9fd;font-style:italic">int</span>) var jump_speed
export (<span style="color:#8be9fd;font-style:italic">int</span>) var gravity

enum {IDLE, RUN, JUMP}
var velocity <span style="color:#ff79c6">=</span> Vector2()
var state
var anim
var new_anim

func _ready():
    change_state(IDLE)

func change_state(new_state):
    state <span style="color:#ff79c6">=</span> new_state
    match state:
        IDLE:
            new_anim <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;idle&#39;</span>
        RUN:
            new_anim <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;run&#39;</span>
        JUMP:
            new_anim <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;jump_up&#39;</span>

func get_input():
    velocity<span style="color:#ff79c6">.</span>x <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>
    var right <span style="color:#ff79c6">=</span> Input<span style="color:#ff79c6">.</span>is_action_pressed(<span style="color:#f1fa8c">&#39;ui_right&#39;</span>)
    var left <span style="color:#ff79c6">=</span> Input<span style="color:#ff79c6">.</span>is_action_pressed(<span style="color:#f1fa8c">&#39;ui_left&#39;</span>)
    var jump <span style="color:#ff79c6">=</span> Input<span style="color:#ff79c6">.</span>is_action_just_pressed(<span style="color:#f1fa8c">&#39;ui_select&#39;</span>)

    <span style="color:#ff79c6">if</span> jump <span style="color:#ff79c6">and</span> is_on_floor():
        change_state(JUMP)
        velocity<span style="color:#ff79c6">.</span>y <span style="color:#ff79c6">=</span> jump_speed
    <span style="color:#ff79c6">if</span> right:
        change_state(RUN)
        velocity<span style="color:#ff79c6">.</span>x <span style="color:#ff79c6">+=</span> run_speed
    <span style="color:#ff79c6">if</span> left:
        change_state(RUN)
        velocity<span style="color:#ff79c6">.</span>x <span style="color:#ff79c6">-=</span> run_speed
    $Sprite<span style="color:#ff79c6">.</span>flip_h <span style="color:#ff79c6">=</span> velocity<span style="color:#ff79c6">.</span>x <span style="color:#ff79c6">&lt;</span> <span style="color:#bd93f9">0</span>
    <span style="color:#ff79c6">if</span> !right <span style="color:#ff79c6">and</span> !left <span style="color:#ff79c6">and</span> state <span style="color:#ff79c6">==</span> RUN:
        change_state(IDLE)

func _process(delta):
    get_input()
    <span style="color:#ff79c6">if</span> new_anim <span style="color:#ff79c6">!=</span> anim:
        anim <span style="color:#ff79c6">=</span> new_anim
        $AnimationPlayer<span style="color:#ff79c6">.</span>play(anim)

func _physics_process(delta):
    velocity<span style="color:#ff79c6">.</span>y <span style="color:#ff79c6">+=</span> gravity <span style="color:#ff79c6">*</span> delta
    <span style="color:#ff79c6">if</span> state <span style="color:#ff79c6">==</span> JUMP:
        <span style="color:#ff79c6">if</span> is_on_floor():
            change_state(IDLE)
    velocity <span style="color:#ff79c6">=</span> move_and_slide(velocity, Vector2(<span style="color:#bd93f9">0</span>, <span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>))

    <span style="color:#ff79c6">if</span> position<span style="color:#ff79c6">.</span>y <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">600</span>:
        get_tree()<span style="color:#ff79c6">.</span>reload_current_scene()</code></pre></div>

<p><img src="/godot_lessons/img/k2d_platf_sample.gif?width=300" alt="alt" /></p>

<p>We&rsquo;re using a very rudimentary state machine to handle the transitions between the character&rsquo;s idle, running, and jumping states.</p>

<p>When using <code>move_and_slide()</code> the function returns a vector representing the
movement that remained after the slide collision occurred. Setting that value back
to the character&rsquo;s <code>velocity</code> allows us to smoothly move up and down slopes. Try
removing <code>velocity =</code> and see what happens if you don&rsquo;t do this.</p>

<p>Also note that we&rsquo;ve added <code>Vector2(0, -1)</code> as the floor normal. This is a vector
pointing straight upward. This means that if the character collides with an object
that has this normal, it will be considered a floor.</p>

<p>Using the floor normal allows us to make jumping work, using <code>is_on_floor()</code>. This
function will only return <code>true</code> after a <code>move_and_slide()</code> collision where the
colliding body&rsquo;s normal is within 45 degrees of the given floor vector (this can
be adjusted by setting <code>floor_max_angle</code>).</p>

<p>This also allows you to implement other features like wall jumps using <code>is_on_wall()</code>,
for example.</p>

<h2 id="conclusion">Conclusion</h2>

<p>This introduction only scratches the surface of what&rsquo;s possible with KinematicBody2D.
As with all Godot nodes, <a href="http://docs.godotengine.org/en/latest/classes/class_kinematicbody2d.html" target="_blank">
the API documentation</a> is your friend, so reference it frequently until you&rsquo;re
comfortable with the class methods.</p>

<p>Kinematic bodies are so useful, that I&rsquo;ll probably do a followup &ldquo;Know Your Nodes&rdquo; exploring
more uses. Please comment below if you have ideas or suggestions for other examples you&rsquo;d
like to see.</p>

<h3 id="a-href-blog-img-kyn3-0-kinematicbody2d-zip-download-the-sample-project-a"><a href="/blog/img/KYN3.0_KinematicBody2D.zip">Download the sample project</a></h3>


<h3>Comments</h3>
<div id="disqus_thread"></div>
<script type="text/javascript">

    (function () {
        
        
        if (window.location.hostname == "localhost")
            return;

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = 'kidscancode';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
        Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/godot_recipes/js/clipboard.min.js?1555964166"></script>
    <script src="/godot_recipes/js/perfect-scrollbar.min.js?1555964166"></script>
    <script src="/godot_recipes/js/perfect-scrollbar.jquery.min.js?1555964166"></script>
    <script src="/godot_recipes/js/jquery.sticky.js?1555964166"></script>
    <script src="/godot_recipes/js/featherlight.min.js?1555964166"></script>
    <script src="/godot_recipes/js/html5shiv-printshiv.min.js?1555964166"></script>
    <script src="/godot_recipes/js/highlight.pack.js?1555964166"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/godot_recipes/js/modernizr.custom-3.6.0.js?1555964166"></script>
    <script src="/godot_recipes/js/learn.js?1555964166"></script>
    <script src="/godot_recipes/js/hugo-learn.js?1555964166"></script>

    <link href="/godot_recipes/mermaid/mermaid.css?1555964166" type="text/css" rel="stylesheet" />
    <script src="/godot_recipes/mermaid/mermaid.js?1555964166"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

